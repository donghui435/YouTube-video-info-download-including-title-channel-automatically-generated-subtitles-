[Music] if you need to know the best counter to the Queen's Gambit you ask a chess grandmaster if you need to figure out the average number of steps it would take before a randomly moving knight returns to its starting square you ask a mathematician let's make the problem more precise put a knight in its usual starting spot on the board it doesn't matter if you choose the first row or the last row or the second to left or the second to right they're all symmetric from there the knight has three legal moves any of these capital L shaped jumps and it makes each of these jumps with probability 1/3 meaning that it jumps here 1/3 of the time here third of the time and here 1/3 of the time the night continues moving this way among all of its allowable moves it picks the square randomly with uniform or equal probability and hops to it in our example the knight now has six legal moves each with a 1/6 chance now that the Knights in the middle of the board it has the freedom to make all eight possible news eventually the knight makes its way back to its starting spot about 18% of the time it hops back in two moves but it could take a much longer path like this or this once it gets to the center of the board it has a lot of options for where to jump and could wander around for a long time before getting back to its starting spot so how many times will the knight move on average until it gets back to its original Square to answer this question we're going to do something very common in mathematics we'll abstract away from the specifics of our problem and place it in a well studied structure or format in this case it's something called a Markov chain the first ingredient for a Markov chain is a state space in our case the state space is the 64 squares of the chessboard each square is called a state the second ingredient for a Markov chain is a probability transition function these tell us how likely the night is to jump one square or state in the language of Markov chains to another these arrows show us that from the corner the knight has a one-half chance to jump here and a 1/2 chance to jump here from a central square we show the eight equally likely jumps with these arrows a similar story holds here we could keep filling in the chessboard with arrows like these or these or these technically every square should have arrows coming out of it but if we drew them all in there'd be so many arrows that the whole picture would be cluttered in fact that's the rule about probability transition functions every state has to have outgoing arrows that add up to exactly one since the arrows tell us how likely a knight is to jump from one square to another the requirement that they add up to 1 can be interpreted as saying there's a hundred percent chance of jumping somewhere so a Markov chain is simply made of two things a state space and a probability transition function in order to solve our problem about the randomly hopping Knight we need to learn a little more about general Markov chain theory to help with that let's check out a different example a super-weird radio station plays two kinds of music kpop and ska these are the states of the Markov chain two-thirds of the time the next song is the same genre as the song was currently playing and the other one-third of the time it switches genres that's the probability transition function indicated by the arrows now I want to introduce the stationary distribution the stationary distribution assigns one number to each state the specific numbers that assigns are determined by the answer to this question if we have a huge number of radios what fraction should be tuned to kpop and what fraction should be tuned to ska so that after they all randomly switch songs the same fraction of radios are tuned to each channel in this case with the probability transition function indicated the stationary distribution of the Markov chain has value one-half kpop and value one half on ska if we have a thousand radios and about half the radio they're tuned to kpop and have to scoff at the next song change a third playing kpop will switch to ska but the same number playing sk√•l will switch to kpop so it stays balanced that's what makes it a stationary distribution a slightly more intuitive way to think about it is the following if you listen to one radio for a really long time what fraction of songs you hear will be kpop and what fraction will be ska about half and half here's a theorem about stationary distributions pick a state in the Markov chain and give it the generic name state X starting from state X the average number of hops it will take to return to state x is 1 divided by the value of the stationary distribution at state X this kind of makes sense the bigger the stationary distribution the more popular the state is and the less time it takes to return to it for a formal proof check out the resources in the description including the textbook where I first saw this problem let's apply the theorem to our radio station if we're listening to a kpop song how long will it take to hear another kpop song there's a 2/3 chance that the next song will be a kpop song but it's also possible that we'll listen to some scuffles before returning applying the theorem we can see that on average it will take 1 divided by 1/2 or 2 songs before we hear another kpop song what if the radio station decided that people really like kpop so they changed the probability transition function and now it has a 3/4 chance of staying on kpop they also lowered the probability it will stay on scoff like then the stationary distribution is different it plays k-pops two thirds of the time and ska one-third of the time applying that to our theorem after hearing a kpop song you'll now have to wait less time one and a half songs on average before hearing another kpop song which makes sense let's go back to the night randomly hopping around a chessboard now that we know what the stationary distribution is and how it relates to the time it takes to return to a given state in a Markov chain we can solve our night problem in order to answer our question on average how many hops will it take before a knight returns to its original square we need to find the stationary distribution and use the theorem if a knight hops around randomly for a really long time what fraction of its time will expend on each square intuitively the squares in the center should have a bigger fraction since they're easier to access and the corners will have a smaller fraction but how do we compute the exact number you're welcome to pause the video here and try to figure it out yourself it's a fun challenge but if you're ready to hear the solution I'll tell you now first we're going to fill a chessboard with Knights in a particular way on each square place the number of knights that corresponds with the number of possible moves a knight can make from that square so the corner squares each have two Knights and the central squares each has eight ninths and the ones closer to the edges either have three four or six ninths this is how many knights will put on each square now here's my big claim if all the knights take one random hop then on average the same number of Knights will end up on each square why let's look at two squares like c7 and e8 as they're known in chess parlance see seven has six nights on it and e8 has four all of these nights jump randomly each of the six nights on c7 has a 1/6 chance of jumping to e8 so on average exactly one night will jump to e8 similarly each of the four nights on e8 has a 1/4 chance of jumping to c7 so on average exactly one night will jump to c7 this means that c7 and e8 will swap a night ending up with the same number they started with there's nothing special about c7 and e8 it works for any two squares that are a nice move away from each other so all the squares swap pieces and the configuration of night ends up exactly as it started this collection of nights is very close to the stationary distribution all we have to do is figure out what fraction of nights are on each square the total number of nights is 336 so we divide the number of nights on each square by 336 to get the fraction now this is the stationary distribution for the Markov chain now that we know the stationary distribution we can apply the theorem from earlier to finally answer our questions how many random hops on average will the night take before returning to its original square well to figure out the stationary distribution at the original square we divide 3 by 336 to get 1 over 112 our serum says that we divide one by one over a hundred and twelve to get the expected number of moves before the night returns that means it will take on average 112 random hop before the night returns to its square so if it hopped once a second the average amount of time it would take to return is a little under two minutes but as we saw earlier it will sometimes return in just two seconds so in order for the average to be as big as two minutes the night must sometimes spend a long I'm hoppin around before finding its way home here's a challenge for you if you started the night in the corner instead of its usual square how many hops would it take on average for it to return and another challenge if you start a rook in the corner how many moves will it make on average until it returns to its starting square leave your answers in the comments see you next week on infinite series you all had a bunch of great responses to our episode exploring Pi in different metrics funky Tom noted that Pi in the l2 metrics is famously irrational but Pi in the l1 metric is an integer so they ask how often PI will be irrational in LP metrics well as P varies from 1 to infinity pi will take on all values between 3 & 4 a lot of those values are rational like three point two and three point seven six two but almost every number is irrational there are more precise versions of this statement but I'll just say that pi will very often be irrational because most numbers are taylor Kinser asked if it's possible for pi equal infinity well maybe in the episode we were talking about metrics that are linear in some sense that is we want to measure length in a way that's scaled so the distance between two zero and the origin should be twice as long as the distance between one zero and the origin in this case pi will always be between three and four inclusive but as AF pointed out if we drop that requirement weird things happen there's this funny metric called the discrete metric where the distance between any two points is 1 unless they're the same point then the distance between a point and itself is 0 there's a good debate in the comments about what a circle might look like under this match and what that makes pi honestly I'm not sure if there's a good way to make sense of this but I like the curiosity and creativity in this debate finally Hui din asked a pretty neat question what's the value of P such that Pi in the elf key metric is equal to P and Steve's Navi stuff helpfully provided a succinct response three point three zero five two four cool